{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ comunidade.nome }}</title>
  <link rel="stylesheet" href="{% static 'css/milligram.cBase.css' %}" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="{% static 'css/milligram.evento.css' %}" />
  <link rel="stylesheet" href="{% static 'css/milligram.submeter.css' %}" />
  <link rel="stylesheet" href="{% static 'css/milligram.material.css' %}" />
  <link rel="stylesheet" href="{% static 'css/milligram.post.css' %}">




</head>

<body class="comunidade {{ comunidade.slug }}">
  <header class="comunidade-header">
    <img src="{{ comunidade.capa_comunidade.url }}" alt="Imagem da comunidade" class="comunidade-img" />
    <div class="comunidade-info" href="">
      <h1>{{ comunidade.nome }}</h1>
      <p>{{ comunidade.descricao }}</p>
      <form action="{% url 'modifica_joined' comunidade.id carregar 'modificar_seguidor' %}" method="POST">
   
           {% csrf_token %}
             <button class="btn-junte-se 
                              {%if user_joined == True %} btn-juntado {%endif%}">
                              <!-- coloquei o css de btn-juntado dem cBase -->
                                {%if user_joined == False %}
                                        Junte-se
                                {% else%}
                                        Participando
                                {%endif%}
              </button>
        </form>
      <div class="comunidade-meta">
        <span>{{ comunidade.membros.count }} membros</span>
        <br>
      
        <span>{{ comunidade.posts.count }} postagens</span>
      </div>
    </div>
    <style>
      /* sstyle provisÃ³rio */
    </style>
  </header>
  <button><a href="{% url 'indexComunidade' %}">Saia aqui</a></button>
  <nav class="comunidade-tabs tabs">
    <button> <a href="{% url 'carregar' comunidade.id 'posts' %}"
        class=" {% if carregar == 'posts' %}active{% endif %}">postagens</a>
    </button>
    <button> <a href="{% url 'carregar'  comunidade.id 'materiais' %}"
        class=" {% if carregar == 'materiais' %}active{% endif %}">materiais</a>
    </button>
    <button> <a href="{% url 'carregar'  comunidade.id 'eventos' %}"
        class=" {% if carregar == 'eventos' %}active{% endif %}">eventos</a>
    </button>


  </nav>
  <main class="comunidade-posts">


    {% if carregar == 'posts' %}

    <div class="post">
      <div class="post-topo">
        <img src="foto_perfil.jpg" alt="foto perfil" class="foto-perfil">
        <span class="nome-perfil">nomeperfil</span>
      </div>
    
      <div class="post-conteudo">
        conteÃºdo da postagem
      </div>
    
      <div class="post-acoes">
        <button class="btn-like">Like</button>
        <button class="btn-coment">ðŸ’¬</button>
      </div>
    </div>
    
    <div class="post">
      <div class="post-topo">
        <img src="foto_perfil.jpg" alt="foto perfil" class="foto-perfil">
        <span class="nome-perfil">nomeperfil</span>
      </div>
    
      <div class="post-conteudo">
        conteÃºdo da postagem
      </div>
    
      <div class="post-acoes">
        <button class="btn-like">Like</button>
        <button class="btn-coment">ðŸ’¬</button>
      </div>
    </div>    
    <div class="fab">+</div>

    {% for post in comunidade.posts.all %}
    <div class="post">
      <div class="post-header">
        <img src="{{ post.autor.foto.url }}" alt="{{ post.autor.nome }}" class="avatar" />
        <div>
          <strong>{{ post.autor.nome }}</strong>
          <span class="data">{{ post.data|date:"d M" }}</span>
        </div>
      </div>
      <p>{{ post.conteudo }}</p>
      {% if post.imagem %}
      <img src="{{ post.imagem.url }}" alt="Imagem do post" class="post-img" />
      {% endif %}
    </div>
    {% endfor %}























    {%elif carregar == 'materiais' %}




    <!-- <div class="container">
      <nav class="tabs">
        <button>nÂº elementos</button>
        <button>nÂº elementos</button>
        <button>postagens</button>
        <button class="active">materiais</button>
        <button>eventos</button>
      </nav> -->

      <section class="materiais">
        {% for material in dados %}
        <div class="card">
         <div class="infosMaterial">
           <img src="{{material.usuario.foto.url}}" alt="fotoDequemFezOpost">
           <h3><a href="{% url 'view_profile' material.usuario.id %}">{{material.usuario}}</a></h3>
         </div>
          <div class="titulo">{{material.titulo}}precisar mudar aqui</div>

          <div class="descricao">{{material.descricao}}</div>
         
          <a href="{{material.arquivo.url}}"    class="link-material btn-{{material.ext}}">
          ðŸ“„ Vizualizar {{materia.ext}}
        </a> 
        <a href="{{material.arquivo.url}}"  download="" class="link-material btn-{{material.ext}}">
          seta Baixar {{materia.ext}}
        </a> 
      
        </div>
        {% endfor %}

      
      </section>

      <button class="add-btn"><i class="fas fa-plus"></i></button>

    <form action="{% url 'enviar_comunidade' comunidade.id carregar %}" method="POST" enctype="multipart/form-data">
      
            {% csrf_token %}

        <div class="popup material">
        <h2>Mandar Material</h2>
        <input name="titulo" type="text" placeholder="TÃ­tulo do material" />
          <input name="ext" type="text" placeholder="Que tipo de arquivo vocÃª esta mandando preciso colcoar um selec aquinÃ£o fiz nada aqui ainda" />

        <textarea name="descricao" placeholder="DescriÃ§Ã£o do material"></textarea>
        <input name="material" type="file" placeholder="escolha um arquivo" />
       
       <div> <input type="checkbox" name="termos_e_condicoes" id="" required>
         <label for="termos_e_condicoes">
          Aceito os <a href="">termos de condiÃ§Ãµes</a> permitindo que o material seje usado por terceiros
        </label></div>
        <button class="submit-btn">Enviar</button>
      </div>
    </form>
    </div>





























    {% elif carregar == 'eventos' %}
    <div class="container">
    
      {% for e in dados %}
        
      <section class="eventos">
        <div class="evento-card">
          <h3>{{e.tematica}}</h3>
          <div class="descricao">
          {% if e.descricao  %}
          {{e.descricao}}
          {% else %}
          Sem descriÃ§Ã£o
          {% endif %}
        </div>
          <div class="link-meet"><a href="{% if e.url|slice:':4' != 'http' %}https://{{ e.url }}{% else %}{{ e.url }}{% endif %}" target="_blank">{{e.url_da_reuniao}}</a></div>
          <div class="info">
            <span class="data">{{ e.data_hora|date:"d \d\e F \d\e Y" }}</span>
            <span class="hora">Horario: {{ e.data_hora|time:"H:i" }}</span>
          </div>
        </div>
        {% endfor %}

      </section>

      <button class="add-btn"><i class="fas fa-plus"></i></button>

      <div class="popup evento">
      <form action="{% url 'enviar_comunidade' comunidade.id carregar %}" method="POST" enctype="multipart/form-data">
       
        {% csrf_token %}

        <h2>Criar reuniÃ£o</h2>
        {% for message in messages%} 
        <div class="{{ message.tags}}" role="alert">{{message}}</div>
        {% endfor %}
        <input type="text" name="titulo" required placeholder="TÃ­tulo da reuniÃ£o" />
<br>
<textarea name="descricao" placeholder="DescriÃ§Ã£o da reuniÃ£o"></textarea>

<br>
        <input name="url_da_reuniao" required type="text" placeholder="Link do Google Meet" />
        <div class="inline-fields">
          <input name="data" type="date" required/>
          <input name="hora" type="time" required/>
        </div>
        <button class="submit-btn">Criar</button>
      </div>
    </div>
  </form>
    {%endif%}
  </main>


</body>

</html>
<!-- Fala josÃ©! Essa aqui foi a pagina que definitivamente me deu mais trabalho, qualquer pergunta, pode entrar em contato comigo, mas acho que voce vai entender, eu que quebrei a cabeÃ§a kskskks -->